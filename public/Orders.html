<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="img/ZappnottLogo.png" type="image/icon">
    <title>Orders</title>
    <script src="AuthorizationBE.js"></script>
</head>
<body>
    <div class="bg-Likha h-[5rem] w-full shadow-md p-2.5 fixed z-50">
        <nav class="md:flex md:items-center">   
            <div >
                <img src="img/ZappnottLogo.png" alt="" class="h-[4rem] ml-[2rem] cursor-pointer md:cursor-default" onclick="Menu(this)" name = "menu" id="menubutton">
            </div>
            <div class="">
                <ul class="md:flex md:space-x-16 md:items-center md:z-auto md:static absolute bg-Likha w-full left-0 md:w-auto md:py-0 py-4 md:pl-0 pl-7 md:opacity-100 opacity-0 top-[-400px] transition-all ease-in md:ml-24">
                    <li class="my-6 md:my-0">
                        <a href="Home.html" class="hover:text-outline duration-300">
                            HOME
                        </a>
                    </li>
                    <li class="my-6 md:my-0">
                        <a href="" class="hover:text-outline duration-300">
                            SHOP
                        </a>
                    </li>
                    <li class="my-6 md:my-0">
                        <a href="" class="hover:text-outline duration-300">
                            CREATE
                        </a>
                </ul>
            </div>
            <div class="flex fixed p-3 top-1 right-1 md:right-16">
                <img src="img/SEARCH BAR.png" class="h-[3rem] " alt="">
                <a href="Profile.html"><img src="img/PROFILE.png" class="h-[3rem]" alt=""></a>
                <img src="img/CART.png" class="h-[3rem] cursor-pointer" alt="" id="CartIcon">
            </div>
        </nav>
    </div>
    <div class="bg-Likha min-h-screen pl-[6rem] pt-[9rem]">
        <div id="main-container" class="flex flex-col space-y-12">
            <p class=" ml-[5rem] font-Montagu font-bold text-4xl">Orders</p>
            <div id="Order-container" class="flex flex-col space-y-11">
                
                </div>
            </div>
        </div>
    </div>
    
    <script>
        fetch('/Order')
    .then(response => response.json())
    .then(Items => {
        console.log(Items);
        Items.forEach(Item => {
            const ItemList = document.getElementById('Order-container');
            // Create HTML elements to display product information
            const ItemElement = document.createElement('div');
            ItemElement.innerHTML = `
            <div id="Order-${Item.OrderID}" class="ml-[1rem] pt-9 px-[2rem] bg-[#F07C541A] w-[1269px] h-auto outline-dashed outline-[3px] rounded-[15px] outline-outline">
                <div class="ml-[4rem] w-[68rem] flex items-center justify-between">
                    <div>
                        <h1 class="font-extrabold font-Inter text-[#6B707B]">Order ID: ${Item.productOrder}</h1>
                        <h2 class="font-Inter font-medium">Order Date: <span>${Item.OrderedDate}</span></h2>
                    </div>
                    <div>
                        <button class="flex space-x-2"><img src="img/Cancel.png" class="w-[1.5rem]" alt=""><span class="text-[#F07C54CC]">Cancel</span></button>
                    </div>
                </div>
                <hr class="w-[1180.16px] mt-[2rem] ml-3 text-[#F07C54]">
                <div class="w-[75rem] h-auto my-4 flex">
                    <div id="OrderItems-container-${Item.productOrder}" class="w-[75rem] h-auto "></div>
                    <div class="w-[14rem] h-[13rem] flex flex-col ml-[3.5rem] mt-[2rem]">
                        <div class="flex items-center space-x-3">
                            <div class="bg-[#FFFFFF] rounded-full h-[20px] w-[20px] border-outline border-[3px] flex justify-center items-center">
                                <div class="w-[10px] h-[10px] bg-outline rounded-full"></div>
                            </div>
                            <p class="font-Montserrat text-[#F07C54CC]">Ordered</p>
                        </div>
                        <div class="border-l-[1px] border-[#F07C54] h-[25px] ml-[9.25px] relative mt-0 mb-0"></div>
                        <div class="flex items-center space-x-3">
                            <div class="bg-[#FFFFFF] rounded-full h-[20px] w-[20px] border-outline border-[3px] flex justify-center items-center">
                                <div class="w-[10px] h-[10px] bg-outline rounded-full"></div>
                            </div>
                            <p class="font-Montserrat text-[#F07C54CC]">Confirmed</p>
                        </div>
                        <div class="border-l-[1px] border-[#F07C54] h-[25px] ml-[9.25px] relative mt-0 mb-0"></div>
                        <div class="flex items-center space-x-3">
                            <div class="bg-[#FFFFFF] rounded-full h-[20px] w-[20px] border-outline border-[3px] flex justify-center items-center"></div>
                            <p class="font-Montserrat text-[#F07C54CC]">Ready to Pick Up</p>
                        </div>
                    </div>
                </div>
            </div>
            `;
            ItemList.appendChild(ItemElement);
            fetch(`/OrderItem/${Item.productOrder}`)
                .then(response => response.json())
                .then(orderItems => {
                    const orderItemsContainer = document.getElementById(`OrderItems-container-${Item.productOrder}`);

                    orderItems.forEach(orderItem => {
                        const IElement = document.createElement('div');
                        IElement.innerHTML = `
                        <div class="flex space-x-4 h-[13rem] w-[55rem] ml-[3rem]">
                            <img src="data:image/jpeg;base64,${orderItem.productImage}" class="w-[175px] h-[175px]">
                            <div class="w-[13rem] h-[5rem] mt-[1rem] mr-[6rem]">
                                <p class="font-Montagu font-extrabold text-[24px]">${orderItem.productName}</p>
                                <p>Quantity: ${orderItem.Quantity}</p>
                                <p>Total Price: P ${orderItem.Price}</p>
                            </div>
                        </div>
                        `;
                        orderItemsContainer.appendChild(IElement);
                    });
                })
        });
    });
    
            
    </script>
    
</body>
</html>